<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collections - SERIAE</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@200;300;400;500;600&display=swap" rel="stylesheet">
    <script src="../assets/js/translations.js"></script>
</head>
<body>
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-to-content" data-translate="accessibility.skip">Skip to content</a>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="../index.html"><h1>SERIAE</h1></a>
            </div>
            <div class="nav-links">
                <div class="nav-dropdown">
                    <a href="../dashboard.html" class="nav-link" data-translate="nav.dashboard">Dashboard</a>
                </div>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger"><span data-translate="nav.buyer.menu">Buyer Menu</span> <span class="dropdown-arrow">▼</span></a>
                    <div class="dropdown-menu">
                        <a href="../collections/index.html" class="dropdown-item" aria-current="page" data-translate="buyer.browse.collections">Browse Collections</a>
                        <a href="../auctions/index.html" class="dropdown-item" data-translate="buyer.active.auctions">Active Auctions</a>
                        <a href="../auctions/history.html" class="dropdown-item" data-translate="buyer.bidding.history">Bidding History</a>
                        <a href="../watchlist/index.html" class="dropdown-item" data-translate="buyer.watchlist">Watchlist</a>
                        <a href="../purchases/index.html" class="dropdown-item" data-translate="buyer.purchase.history">Purchase History</a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger"><span data-translate="nav.seller.menu">Seller Menu</span> <span class="dropdown-arrow">▼</span></a>
                    <div class="dropdown-menu">
                        <a href="../seller/register.html" class="dropdown-item" data-translate="seller.product.registration">Product Registration</a>
                        <a href="../seller/products.html" class="dropdown-item" data-translate="seller.product.list">Product List</a>
                        <a href="../seller/exhibitions.html" class="dropdown-item" data-translate="seller.exhibition.list">Exhibition List</a>
                        <a href="../seller/analytics.html" class="dropdown-item" data-translate="seller.sales.analytics">Sales Analytics</a>
                        <a href="../seller/consignment.html" class="dropdown-item" data-translate="seller.consignment.status">Consignment Status</a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger"><span data-translate="nav.user.management">User Management</span> <span class="dropdown-arrow">▼</span></a>
                    <div class="dropdown-menu">
                        <a href="../legal/terms.html" class="dropdown-item" data-translate="user.terms.of.use">Terms of Use</a>
                        <a href="../support/contact.html" class="dropdown-item" data-translate="user.contact.us">Contact Us</a>
                        <a href="../support/index.html" class="dropdown-item" data-translate="user.support.center">Support Center</a>
                        <a href="../legal/privacy.html" class="dropdown-item" data-translate="user.privacy.policy">Privacy Policy</a>
                    </div>
                </div>
            </div>
            <div class="nav-actions">
                <div class="nav-dropdown language-toggle">
                    <a href="#" class="nav-link dropdown-trigger">EN <span class="dropdown-arrow">▼</span></a>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" data-lang="en" data-translate="common.english">English</a>
                        <a href="#" class="dropdown-item" data-lang="ja" data-translate="common.japanese">日本語</a>
                    </div>
                </div>
                <div class="nav-dropdown profile-menu">
                    <a href="#" class="nav-link dropdown-trigger profile-trigger"><span data-translate="nav.profile">Profile</span> <span class="dropdown-arrow">▼</span></a>
                    <div class="dropdown-menu profile-dropdown">
                        <div class="profile-header">
                            <div class="profile-avatar">S</div>
                            <div class="profile-info">
                                <span class="profile-name" data-translate="profile.member.name">Seriae Member</span>
                                <span class="profile-status" data-translate="profile.member.status">Premium</span>
                            </div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="../account/profile.html" class="dropdown-item" data-translate="profile.my.profile">My Profile</a>
                        <a href="../account/settings.html" class="dropdown-item" data-translate="profile.account.settings">Account Settings</a>
                        <a href="../account/addresses.html" class="dropdown-item" data-translate="profile.shipping.address">Shipping Address</a>
                        <a href="../account/payment.html" class="dropdown-item" data-translate="profile.bank.accounts">Bank Accounts</a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item logout" data-translate="nav.logout">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main id="main-content">
        <section class="page-header">
            <div class="container">
                <h1 data-translate="collections.title">Luxury Collections</h1>
                <p data-translate="collections.subtitle">Curated luxury pieces from the world's most prestigious brands</p>
            </div>
        </section>

        <section class="collections-filters">
            <div class="container">
                <div class="filter-bar">
                    <div class="filter-group">
                        <label data-translate="collections.filter.category">Category:</label>
                        <div class="filter-tabs" role="tablist">
                            <button class="filter-tab active" role="tab" data-category="all" aria-selected="true" data-translate="collections.category.all">All</button>
                            <button class="filter-tab" role="tab" data-category="handbags" aria-selected="false" data-translate="collections.category.handbags">Handbags</button>
                            <button class="filter-tab" role="tab" data-category="timepieces" aria-selected="false" data-translate="collections.category.timepieces">Timepieces</button>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label data-translate="collections.filter.status">Status:</label>
                        <select id="status-filter" class="filter-select">
                            <option value="all" data-translate="collections.status.all">All Items</option>
                            <option value="auction" data-translate="collections.status.auction">Auction</option>
                            <option value="available" data-translate="collections.status.available">Available</option>
                            <option value="appointment" data-translate="collections.status.appointment">By Appointment</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label data-translate="collections.filter.sort">Sort:</label>
                        <select id="sort-filter" class="filter-select">
                            <option value="newest" data-translate="collections.sort.newest">Newest First</option>
                            <option value="price-asc" data-translate="collections.sort.price.asc">Price: Low to High</option>
                            <option value="price-desc" data-translate="collections.sort.price.desc">Price: High to Low</option>
                            <option value="brand" data-translate="collections.sort.brand">Brand</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <section class="collections-grid">
            <div class="container">
                <div id="items-grid" class="items-grid">
                    <!-- Featured Item: LV Neverfull -->
                    <div class="item-card" style="border: 2px solid var(--champagne-gold);">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.1);">
                                <rect x="60" y="50" width="180" height="180" rx="4"/>
                                <circle cx="120" cy="120" r="20"/>
                                <path d="M60 180l50-50 40 40M180 140l30-30 30 30v60"/>
                                <text x="150" y="250" text-anchor="middle" fill="var(--champagne-gold)" font-size="14" font-weight="bold">FEATURED</text>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Louis Vuitton</h3>
                            <p class="item-title">Neverfull MM Monogram</p>
                            <p class="item-condition">Condition: Excellent</p>
                            <div class="item-footer">
                                <span class="item-price">$1,850</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Hermès Birkin -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <rect x="60" y="50" width="180" height="180" rx="4"/>
                                <circle cx="120" cy="120" r="20"/>
                                <path d="M60 180l50-50 40 40M180 140l30-30 30 30v60"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Hermès</h3>
                            <p class="item-title">Birkin 30 Black Togo Leather</p>
                            <p class="item-condition">Condition: Excellent</p>
                            <div class="item-footer">
                                <span class="item-price">$24,500</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Rolex Submariner -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <circle cx="150" cy="140" r="80"/>
                                <circle cx="150" cy="140" r="60"/>
                                <path d="M150 80v-20M150 220v-20M210 140h20M70 140h20"/>
                                <path d="M150 140l30-30"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Rolex</h3>
                            <p class="item-title">Submariner Date 41mm Steel</p>
                            <p class="item-condition">Condition: Pristine</p>
                            <div class="item-footer">
                                <span class="item-price">$18,500</span>
                                <span class="item-status status-auction">Auction</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chanel Classic Flap -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <rect x="60" y="50" width="180" height="180" rx="4"/>
                                <circle cx="120" cy="120" r="20"/>
                                <path d="M60 180l50-50 40 40M180 140l30-30 30 30v60"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Chanel</h3>
                            <p class="item-title">Classic Flap Medium Caviar</p>
                            <p class="item-condition">Condition: Very Good</p>
                            <div class="item-footer">
                                <span class="item-price">$8,200</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Cartier Love Bracelet -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <circle cx="150" cy="140" r="70" stroke-width="8"/>
                                <circle cx="120" cy="80" r="6" fill="currentColor"/>
                                <circle cx="180" cy="80" r="6" fill="currentColor"/>
                                <circle cx="120" cy="200" r="6" fill="currentColor"/>
                                <circle cx="180" cy="200" r="6" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Cartier</h3>
                            <p class="item-title">Love Bracelet Rose Gold Size 17</p>
                            <p class="item-condition">Condition: Excellent</p>
                            <div class="item-footer">
                                <span class="item-price">$7,900</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Patek Philippe -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <circle cx="150" cy="140" r="80"/>
                                <circle cx="150" cy="140" r="60"/>
                                <path d="M150 80v-20M150 220v-20M210 140h20M70 140h20"/>
                                <path d="M150 140l30 30"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Patek Philippe</h3>
                            <p class="item-title">Nautilus 5711 Blue Dial</p>
                            <p class="item-condition">Condition: Pristine</p>
                            <div class="item-footer">
                                <span class="item-price">$165,000</span>
                                <span class="item-status status-appointment">By Appointment</span>
                            </div>
                        </div>
                    </div>

                    <!-- Gucci Marmont -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <rect x="60" y="50" width="180" height="180" rx="4"/>
                                <circle cx="120" cy="120" r="20"/>
                                <path d="M60 180l50-50 40 40M180 140l30-30 30 30v60"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Gucci</h3>
                            <p class="item-title">GG Marmont Small Shoulder Bag</p>
                            <p class="item-condition">Condition: Very Good</p>
                            <div class="item-footer">
                                <span class="item-price">$1,650</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Dior Lady Dior -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <rect x="60" y="50" width="180" height="180" rx="4"/>
                                <circle cx="120" cy="120" r="20"/>
                                <path d="M60 180l50-50 40 40M180 140l30-30 30 30v60"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Dior</h3>
                            <p class="item-title">Lady Dior Medium Patent Leather</p>
                            <p class="item-condition">Condition: Excellent</p>
                            <div class="item-footer">
                                <span class="item-price">$4,200</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Prada Re-Edition -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <rect x="60" y="50" width="180" height="180" rx="4"/>
                                <circle cx="120" cy="120" r="20"/>
                                <path d="M60 180l50-50 40 40M180 140l30-30 30 30v60"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Prada</h3>
                            <p class="item-title">Re-Edition 2005 Nylon Bag Black</p>
                            <p class="item-condition">Condition: Good</p>
                            <div class="item-footer">
                                <span class="item-price">$1,150</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Bottega Veneta Cassette -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <rect x="60" y="50" width="180" height="180" rx="4"/>
                                <circle cx="120" cy="120" r="20"/>
                                <path d="M60 180l50-50 40 40M180 140l30-30 30 30v60"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Bottega Veneta</h3>
                            <p class="item-title">Cassette Crossbody Intrecciato</p>
                            <p class="item-condition">Condition: Excellent</p>
                            <div class="item-footer">
                                <span class="item-price">$2,950</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>

                    <!-- Audemars Piguet -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <circle cx="150" cy="140" r="80"/>
                                <circle cx="150" cy="140" r="60"/>
                                <path d="M150 80v-20M150 220v-20M210 140h20M70 140h20"/>
                                <path d="M150 140v-40M150 140h40"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Audemars Piguet</h3>
                            <p class="item-title">Royal Oak 41mm Blue Dial</p>
                            <p class="item-condition">Condition: Pristine</p>
                            <div class="item-footer">
                                <span class="item-price">$68,500</span>
                                <span class="item-status status-auction">Auction</span>
                            </div>
                        </div>
                    </div>

                    <!-- Van Cleef & Arpels -->
                    <div class="item-card">
                        <div class="item-image">
                            <svg width="100%" height="280" viewBox="0 0 300 280" fill="none" stroke="currentColor" stroke-width="2" style="background: rgba(212, 175, 55, 0.05);">
                                <circle cx="150" cy="140" r="70" stroke-width="8"/>
                                <path d="M150 70l20 40l40-20l-20 40l20 40l-40-20l-20 40l-20-40l-40 20l20-40l-20-40l40 20z" fill="none"/>
                            </svg>
                        </div>
                        <div class="item-info">
                            <h3 class="item-brand">Van Cleef & Arpels</h3>
                            <p class="item-title">Alhambra 20 Motifs Necklace Gold</p>
                            <p class="item-condition">Condition: Excellent</p>
                            <div class="item-footer">
                                <span class="item-price">$12,800</span>
                                <span class="item-status status-available">Available</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="no-results" class="no-results" style="display: none;">
                    <p data-translate="collections.no.results">No items found matching your filters</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>SERIAE</h3>
                <p data-translate="footer.tagline">Curating excellence in luxury resale since 1987</p>
            </div>
            <div class="footer-section">
                <h4 data-translate="footer.collections">Collections</h4>
                <ul>
                    <li><a href="../collections/index.html" data-translate="footer.handbags.accessories">Handbags & Accessories</a></li>
                    <li><a href="../collections/index.html" data-translate="footer.fine.timepieces">Fine Timepieces</a></li>
                    <li><a href="../seller/register.html" data-translate="footer.private.consignment">Private Consignment</a></li>
                    <li><a href="../support/index.html" data-translate="footer.authentication.services">Authentication Services</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4 data-translate="footer.experience">Experience</h4>
                <ul>
                    <li><a href="../support/index.html" data-translate="footer.private.showroom">Private Showroom</a></li>
                    <li><a href="../support/contact.html" data-translate="footer.personal.curator">Personal Curator</a></li>
                    <li><a href="../account/profile.html" data-translate="footer.member.services">Member Services</a></li>
                    <li><a href="../support/index.html" data-translate="footer.heritage.stories">Heritage Stories</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p data-translate="footer.copyright">&copy; 2024 Seriae. All rights reserved. | London | New York | Geneva</p>
        </div>
    </footer>

    <script src="../assets/js/data.js"></script>
    <script src="../assets/js/ui.js"></script>
    <script src="../assets/js/render.js"></script>
    <script src="../assets/js/main.js"></script>
    <script>
        // Collections page logic
        (async function() {
            const items = await window.DataService.getItems();
            const watchlist = window.DataService.getWatchlist();

            let filteredItems = [...items];
            let currentCategory = 'all';
            let currentStatus = 'all';
            let currentSort = 'newest';

            function renderItems() {
                const grid = document.getElementById('items-grid');
                const noResults = document.getElementById('no-results');

                // Filter by category
                let filtered = currentCategory === 'all'
                    ? filteredItems
                    : filteredItems.filter(item => item.category === currentCategory);

                // Filter by status
                if (currentStatus !== 'all') {
                    filtered = filtered.filter(item => item.status === currentStatus);
                }

                // Sort
                switch(currentSort) {
                    case 'price-asc':
                        filtered.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-desc':
                        filtered.sort((a, b) => b.price - a.price);
                        break;
                    case 'brand':
                        filtered.sort((a, b) => a.brand.localeCompare(b.brand));
                        break;
                    case 'newest':
                    default:
                        filtered.sort((a, b) => b.year - a.year);
                        break;
                }

                if (filtered.length === 0) {
                    grid.style.display = 'none';
                    noResults.style.display = 'block';
                    return;
                }

                grid.style.display = 'grid';
                noResults.style.display = 'none';

                grid.innerHTML = filtered.map(item => {
                    const isWatched = watchlist.includes(item.id);
                    const statusBadge = item.status === 'auction'
                        ? `<span class="item-badge auction">${window.Translation.t('collections.badge.auction')}</span>`
                        : item.status === 'appointment'
                        ? `<span class="item-badge appointment">${window.Translation.t('collections.badge.appointment')}</span>`
                        : '';

                    const timeRemaining = item.status === 'auction' && item.endsAtISO
                        ? `<div class="item-countdown">${window.Render.timeRemaining(item.endsAtISO)}</div>`
                        : '';

                    return `
                        <div class="item-card" data-item-id="${item.id}">
                            <a href="../item/${item.slug}.html" class="item-link">
                                <div class="item-image">
                                    <img src="${item.cover}" alt="${item.title}" width="400" height="400" loading="lazy">
                                    ${statusBadge}
                                    <button class="watchlist-btn ${isWatched ? 'active' : ''}"
                                            data-item-id="${item.id}"
                                            aria-label="${isWatched ? 'Remove from watchlist' : 'Add to watchlist'}"
                                            onclick="event.preventDefault(); toggleWatchlist('${item.id}');">
                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="${isWatched ? '#d4af37' : 'none'}" stroke="currentColor" stroke-width="2">
                                            <path d="M10 3.5l2.5 5 5.5.5-4 4 1 5.5-5-3-5 3 1-5.5-4-4 5.5-.5z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="item-info">
                                    <h3 class="item-brand">${item.brand}</h3>
                                    <h4 class="item-title">${item.title}</h4>
                                    <p class="item-meta">${item.year} · ${item.condition}</p>
                                    ${timeRemaining}
                                    <div class="item-price">${window.Render.currency(item.price)}</div>
                                </div>
                            </a>
                        </div>
                    `;
                }).join('');
            }

            // Toggle watchlist
            window.toggleWatchlist = function(itemId) {
                window.DataService.toggleWatchlist(itemId);
                renderItems();

                const item = items.find(i => i.id === itemId);
                const isNowWatched = window.DataService.getWatchlist().includes(itemId);
                const message = isNowWatched
                    ? `${item.title} added to watchlist`
                    : `${item.title} removed from watchlist`;
                window.UI.toast(message, 'success');
            };

            // Category filter
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.filter-tab').forEach(t => {
                        t.classList.remove('active');
                        t.setAttribute('aria-selected', 'false');
                    });
                    tab.classList.add('active');
                    tab.setAttribute('aria-selected', 'true');
                    currentCategory = tab.dataset.category;
                    renderItems();
                });
            });

            // Status filter
            document.getElementById('status-filter').addEventListener('change', (e) => {
                currentStatus = e.target.value;
                renderItems();
            });

            // Sort filter
            document.getElementById('sort-filter').addEventListener('change', (e) => {
                currentSort = e.target.value;
                renderItems();
            });

            // Initial render
            renderItems();

            // Update countdown timers every 10 seconds
            setInterval(renderItems, 10000);
        })();
    </script>
</body>
</html>
